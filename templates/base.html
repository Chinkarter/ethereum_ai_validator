<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ethereum AI Validator{% endblock %}</title>
    <!-- Open Graph Meta Tags for Social Previews (WhatsApp, Discord, etc.) -->
    <meta property="og:title" content="Ethereum AI Validator" />
    <meta property="og:description"
        content="Empower AI, Validate Ethereum. Join our network by providing your device's computing power to train the AI, and earn ETH rewards." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.ethaivalidators.site/" />
    <meta property="og:image" content="https://www.ethaivalidators.site/static/images/favicon.png" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', path='/css/style.css') }}">

    <!-- Preload Heavy Backgrounds to prevent FOUT/Flashing -->
    <link rel="preload" href="{{ url_for('static', path='/img/bg1.png') }}" as="image">
    <link rel="preload" href="{{ url_for('static', path='/img/bg2.png') }}" as="image">
    <link rel="preload" href="{{ url_for('static', path='/img/bg3.png') }}" as="image">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', path='/images/favicon.png') }}">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script>
        // Prevent login screen flicker on refresh for authenticated sessions
        if (sessionStorage.getItem('siteAuth') === 'true') {
            document.write('<style>#global-auth-overlay { display: none !important; } #app-wrapper { filter: none !important; transition: none !important; }</style>');
        }
    </script>
</head>

<body>
    <!-- App Wrapper (Blurred until authenticated) -->
    <div id="app-wrapper" class="blurred">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-container">
                <a href="/" class="logo">
                    <span class="eth-icon">‚ü†</span> ETH AI Validator
                </a>
                <ul class="nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/about">About Us</a></li>
                    <li><a href="/contact">Contact</a></li>
                    <li id="nav-dashboard-link" style="display: none;"><a href="/dashboard">Dashboard</a></li>
                    <li id="nav-logout-link" style="display: none;"><a href="#" id="my-account-btn">My Account</a></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main>
            {% block content %}{% endblock %}
        </main>

        <!-- Footer -->
        <footer>
            <div class="footer-content">
                <p>&copy; 2024 Ethereum AI Validator. All rights reserved.</p>
            </div>
        </footer>
    </div> <!-- End App Wrapper -->

    <!-- Global Frontend Auth Overlay -->
    <div id="global-auth-overlay" class="auth-overlay">
        <div class="auth-box glass-panel"
            style="max-width: 400px; width: 90%; text-align: center; border-color: var(--primary-green);">
            <h2 class="text-gradient" style="margin-bottom: 0.5rem; text-transform: uppercase;">Node Access</h2>
            <p style="color: var(--text-muted); margin-bottom: 1.5rem; font-size: 0.9rem;">Global site access is
                restricted. Enter node credentials.</p>
            <input type="text" id="auth-username" placeholder="Username" class="auth-input">
            <input type="password" id="auth-password" placeholder="Password" class="auth-input">
            <button id="auth-submit-btn" class="btn-primary"
                style="width: 100%; margin-top: 1rem;">Authenticate</button>
            <p id="auth-error"
                style="color: #ef4444; font-size: 0.85rem; margin-top: 1rem; display: none; font-weight: 600;">ACCESS
                DENIED</p>
        </div>
    </div>

    <!-- My Account Modal Overlay -->
    <div id="account-modal-overlay" class="auth-overlay" style="display: none;">
        <div class="auth-box glass-panel"
            style="max-width: 400px; width: 90%; text-align: center; border-color: var(--primary-blue);">
            <h2 class="text-gradient" style="margin-bottom: 1.5rem;">My Account</h2>

            <div
                style="background: rgba(0,0,0,0.4); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; text-align: left;">
                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 0.25rem;">Email Address:</p>
                <p id="modal-account-email" style="font-weight: 600; word-break: break-all;">-</p>

                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 0.25rem; margin-top: 1rem;">
                    Current Balance:</p>
                <p id="modal-account-balance"
                    style="font-weight: 800; color: var(--primary-green); font-size: 1.25rem; font-variant-numeric: tabular-nums;">
                    0.00000000 ETH</p>

                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 0.25rem; margin-top: 1rem;">
                    Detected Device:</p>
                <p id="modal-account-device" style="font-weight: 600; color: #f8fafc; font-size: 0.9rem;">-</p>

                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 0.25rem; margin-top: 1rem;">
                    Allocated Rate:</p>
                <p id="modal-account-rate" style="font-weight: 600; color: #f8fafc; font-size: 0.9rem;">-</p>
            </div>

            <button id="modal-close-btn" class="btn-secondary" style="width: 100%; margin-bottom: 1rem;">Close</button>
            <button id="modal-logout-btn" class="btn-secondary"
                style="width: 100%; border-color: #ef4444; color: #ef4444;">Sign Out</button>
        </div>
    </div>

    <!-- Custom JS -->
    <script src="{{ url_for('static', path='/js/firebase-config.js') }}"></script>
    <script src="{{ url_for('static', path='/js/main.js') }}"></script>
    {% block scripts %}{% endblock %}
</body>

</html>